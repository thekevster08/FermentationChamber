

<!DOCTYPE HTML><html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Highcharts Example</title>
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script src="https://code.highcharts.com/stock/modules/exporting.js"></script>  

</head>

<body>
    
<h1>Fermentation Chamber Control Center</h1>
    

<div id="container" style="height: 400px; min-width: 310px"></div>
<Button id="startButton">Start</Button>
<Button id="stopButton">Stop</Button>
<button id="newButton">New</button>

 {% if setpoint%}
  <p id="setpoint">Setpoint:{{setpoint}}</p>
  {% endif %}
  <div id="content">
    
    
    <form method="post" action='/update_setpoint/'>
      <label for="setpoint">Change Setpoint:</label>
      <input type="text" name="setpoint" /><br />
      <input type="submit" />
    </form>
  
  
  
  </div>
  <!-- load scripts at the bottom of your page -->
  <script src="/static/site.js"></script>

<script>
$(document).ready(function(){
    $.getJSON('/static/temperatures.json', function (data) {
        // Create the chart
        var val1 = [];
    	var val2 = [];
    	var val3 = [];
    	$.each(data, function(key,value){
    		val1.push([value[0], value[1]]);
    		val2.push([value[0], value[2]]);
    		val3.push([value[0], value[3]]);
    	});
    	
        $('#container').highcharts('StockChart', {


            chart: {
            renderTo: 'container',
        },
        
        rangeSelector: {
            enabled: true,
            selected: 2,
        },
        
        title: {
            text: 'Fermentation Temperature',
            x: -20 //center
        },
        
    	xAxis: {
    		type: 'datetime',
    		dateTimeLabelFormats: {
    			second: '%Y-%m-%d'
    		}
    	},
    	
        yAxis: {
            title: {
                text: 'Temperature (Â°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },

        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
        },
        
        series: [{
    		name: 'val1',
    		type: 'spline',
    		data: val1,
    		tooltip: {
    		  valueDecimals: 2
    		}
    	}, 
    	{
    		name: 'val2',
    		type: 'spline',
    		data: val2,
    		tooltip: {
    		  valueDecimals: 2
    		}
    	}, 
    	{
    		name: 'val3',
    		type: 'spline',
    		data: val3,
    		tooltip: {
    	      valueDecimals: 2
    		}
    	}]
        });
    });
});
</script>
</body>
</html>